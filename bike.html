<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .bike-card {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px; 
            width: 200px; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .bike-card img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 5px; 
        }
        #grid{
            display:flex;
            gap:10px;
        }

        body {
font-family: Arial, sans-serif;text-align: center;margin-top: 50px;
}
/* Modal background */
.modal {
display: none;background-color: rgba(0, 0, 0, 0.5);
position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;
}
/* Modal content */
.modal-content {
background-color: #fff;margin: 15% auto;padding: 20px;
border: 1px solid #888;width: 50%;
box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
}
/* Close button */
.close-btn {
color: #aaa;float: right;font-size: 28px;font-weight: bold;cursor: pointer;
}
.close-btn:hover,
.close-btn:focus {
color: #000;text-decoration: none;
}
/* Modal title */
.modal-title {
font-size: 24px;
margin-bottom: 15px;
}
/* Modal body */
.modal-body {
font-size: 18px;
}

        
    </style>
</head>
<body>
    <div id="grid"></div>


    <h1>Modal Window Example</h1>
<!-- Trigger Button -->
<button id="openModalBtn">Open Modal</button>
<!-- Modal Structure -->
<div id="myModal" class="modal">
<div class="modal-content">
<span class="close-btn">&times;</span>
<h2 class="modal-title">Modal Title</h2>
<div class="modal-body">
     <label>ID</label>
 
    <input type="text" id="Id">
    <br>
    <label>Bike Name</label>
    <input type="text" id="bname">
    <br>

    <label>Manufacture</label>
    
    <input type="text" id="manf">
    <br>

    <label>Reg No</label>
    <input type="text" id="reg">
    <br>

    <label>Image</label>
    <input type="file" id="image">
    <br>
    <button id="clickModal">Click</button></div>
</div>
</div>

</body>
</html>

<script>
    document.addEventListener("DOMContentLoaded",()=>{
        display();
    })

    function display()
    {
        let existing_bikes=JSON.parse(localStorage.getItem("bikes"))|| [];
        let content="";
        for(const element of existing_bikes){
            content+=
            `<div class="bike-card">
              <strong> bikeId:${element.bikeId}</strong><br>
                <strong>bikeName:${element.bikeName}</strong><br>
              <strong> yearOfManufacture:${element.yearOfManufacture}</strong><br>
                <strong>registrationNumber:${element.registrationNumber}</strong><br>
                <img src="${element.image}">
                <button class="rent" data-bike-id=${element.bikeId}>Rent</button>

                </div>`;
        }
           
       
        document.getElementById("grid").innerHTML=content;
    }


  
// Get modal element
const modal = document.getElementById("myModal");
// Get open modal button
const openModalBtn = document.getElementById("openModalBtn");
// Get close button (the "x")
const closeBtn = document.querySelector(".close-btn");
// Open modal when the button is clicked
openModalBtn.addEventListener("click", () => {
modal.style.display = "block";
});
// Close modal when the close button is clicked
closeBtn.addEventListener("click", () => {
modal.style.display = "none";
});
// Close modal when clicking anywhere outside of the modal content
window.addEventListener("click", (event) => {
if (event.target === modal) {
modal.style.display = "none";
}
});


document.getElementById("clickModal").addEventListener('click',()=>{
    let Id=document.getElementById("Id").value;
    let bikename=document.getElementById("bname").value;
    let Manufacture=document.getElementById("manf").value;
    let Reg=document.getElementById("reg").value;
    let image=document.getElementById("image").files[0];

let bike=JSON.parse(localStorage.getItem("bikes"))|| [];

    const reader=new FileReader();
    reader.onloadend=function()
    {
        const newbike={
            bikeId:Id,
            bikeName:bikename,
            yearOfManufacture:Manufacture,
            registrationNumber:Reg,
            image:reader.result
        }
 bike.push(newbike);
 localStorage.setItem("bikes",JSON.stringify(bike));
 display();

    }
    reader.readAsDataURL(image);
})

document.getElementById("grid").addEventListener('click', (event) => {
    if (event.target && event.target.classList.contains("rent")) {
        const bikeId = event.target.getAttribute("data-bike-id");
        console.log(bikeId); 
        if (bikeId) {
            window.location.href = `Transaction.html?bikeId=${encodeURIComponent(bikeId)}`;
        } else {
            console.error('bikeId is missing');
        }
    }
});

   

</script>